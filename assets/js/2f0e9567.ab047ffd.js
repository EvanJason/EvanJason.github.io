"use strict";(self.webpackChunklwl_docusaurus_website=self.webpackChunklwl_docusaurus_website||[]).push([[5489],{3905:(e,n,t)=>{t.d(n,{Zo:()=>l,kt:()=>m});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),c=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},l=function(e){var n=c(e.components);return r.createElement(p.Provider,{value:n},e.children)},u="mdxType",y={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),u=c(t),d=a,m=u["".concat(p,".").concat(d)]||u[d]||y[d]||o;return t?r.createElement(m,s(s({ref:n},l),{},{components:t})):r.createElement(m,s({ref:n},l))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,s=new Array(o);s[0]=d;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i[u]="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4487:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>y,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=t(7462),a=(t(7294),t(3905));const o={title:"Typescript\u5347\u7ea7\u6307\u5357",categories:["Typescript"],tags:["Typescript"],date:"2023-03-10",author:"\u6df1\u6d77\u5982\u68a6",excerpt:"Typescript \u5347\u7ea7\u6307\u5357"},s="Typescript \u5347\u7ea7\u6307\u5357",i={unversionedId:"TypeScript/Typescript\u5347\u7ea7\u6307\u5357",id:"TypeScript/Typescript\u5347\u7ea7\u6307\u5357",title:"Typescript\u5347\u7ea7\u6307\u5357",description:"\u7248\u672c\u53d8\u66f4",source:"@site/docs/TypeScript/Typescript\u5347\u7ea7\u6307\u5357.md",sourceDirName:"TypeScript",slug:"/TypeScript/Typescript\u5347\u7ea7\u6307\u5357",permalink:"/docs/TypeScript/Typescript\u5347\u7ea7\u6307\u5357",draft:!1,editUrl:"https://github.com/EvanJason/EvanJason.github.io/tree/main/docs/TypeScript/Typescript\u5347\u7ea7\u6307\u5357.md",tags:[{label:"Typescript",permalink:"/docs/tags/typescript"}],version:"current",frontMatter:{title:"Typescript\u5347\u7ea7\u6307\u5357",categories:["Typescript"],tags:["Typescript"],date:"2023-03-10",author:"\u6df1\u6d77\u5982\u68a6",excerpt:"Typescript \u5347\u7ea7\u6307\u5357"},sidebar:"tutorialSidebar",previous:{title:"TypeScript \xd7 @ant-design/icons \u52a8\u6001\u52a0\u8f7d\u4e0e\u7c7b\u578b\u63d0\u793a",permalink:"/docs/TypeScript/TypeScript-\xd7-@ant-designicons-\u52a8\u6001\u52a0\u8f7d\u4e0e\u7c7b\u578b\u63d0\u793a"},next:{title:"localstorage\u548csessionstorage\u7684\u5c01\u88c5",permalink:"/docs/TypeScript/localstorage\u548csessionstorage\u7684\u5c01\u88c5"}},p={},c=[{value:"\u7248\u672c\u53d8\u66f4",id:"\u7248\u672c\u53d8\u66f4",level:3},{value:"\u9700\u8981\u77e5\u9053\u7684\u66f4\u65b0\u5185\u5bb9",id:"\u9700\u8981\u77e5\u9053\u7684\u66f4\u65b0\u5185\u5bb9",level:3}],l={toc:c},u="wrapper";function y(e){let{components:n,...t}=e;return(0,a.kt)(u,(0,r.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"typescript-\u5347\u7ea7\u6307\u5357"},"Typescript \u5347\u7ea7\u6307\u5357"),(0,a.kt)("h3",{id:"\u7248\u672c\u53d8\u66f4"},"\u7248\u672c\u53d8\u66f4"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"4.0.8")," => ",(0,a.kt)("strong",{parentName:"p"},"4.1.6")),(0,a.kt)("h3",{id:"\u9700\u8981\u77e5\u9053\u7684\u66f4\u65b0\u5185\u5bb9"},"\u9700\u8981\u77e5\u9053\u7684\u66f4\u65b0\u5185\u5bb9"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u65b0\u589e \u6a21\u677f\u5b57\u7b26\u4e32"),(0,a.kt)("li",{parentName:"ul"},"\u65b0\u589e interface \u952e\u91cd\u6620\u5c04\u7684\u7c7b\u578b\u65ad\u8a00"),(0,a.kt)("li",{parentName:"ul"},"\u65b0\u589e type \u7684\u81ea\u8eab\u8c03\u7528 (\u9012\u5f52)")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'// \u6b22\u8fce\u6765\u5230 TypeScript \u6f14\u7ec3\u573a\uff0c\n// \u8fd9\u662f\u4e00\u4e2a\u7ed9\u4f60\u63d0\u4f9b\u7f16\u5199\uff0c\u5206\u4eab\u548c\u5b66\u4e60 TypeScript \u7684\u7f51\u7ad9\u3002\n\n// v4.0.8 => v4.1.6 \u5347\u7ea7\u6307\u5357\n// \u8fd9\u6b21\u66f4\u65b0\u5bf9\u6211\u4eec\u6765\u8bf4\u662f\u4e00\u4e2a\u91cc\u7a0b\u7891\uff0c\u66fe\u7ecf TS \u65e0\u6cd5\u6982\u62ec\u7684 JS \u8bed\u6cd5\u8303\u56f4\uff0c\u73b0\u5728\u53ef\u4ee5\u52a8\u6001\u751f\u6210\n\n// 1. \u6a21\u677f\u5b57\u7b26\u4e32\n// 1.1 \u5e38\u91cf\u5e94\u7528\nconst red = "#ff0000";\nconst green = "#00ff00";\nconst blue = "#0000ff";\n\n// returns "#ff0000" | "#00ff00" | "#0000ff"\ntype RGB = typeof red | typeof green | typeof blue;\n\n// returns "background: #ff0000" | "background: #00ff00" | "background: #0000ff"\ntype BasicBackground = `background: ${RGB}`\n\n// 1.2 \u51fd\u6570\u5e94\u7528\n// refer @see https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-1.html\ntype VerticalAlignment = "top" | "middle" | "bottom";\ntype HorizontalAlignment = "left" | "center" | "right";\n \n// Takes\n//   | "top-left"    | "top-center"    | "top-right"\n//   | "middle-left" | "middle-center" | "middle-right"\n//   | "bottom-left" | "bottom-center" | "bottom-right"\n \ndeclare function setAlignment(value: `${VerticalAlignment}-${HorizontalAlignment}`): void;\n\nsetAlignment("top-left");   // works!\nsetAlignment("top-middel"); // error!\n\n// 1.3 \u8bbe\u8ba1\u6a21\u5f0f\u4e2d\u7684\u5e94\u7528\n// refer @see https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-1.html\nlet person = makeWatchedObject({\n  firstName: "Homer",\n  age: 42, // give-or-take\n  location: "Springfield",\n});\n\ntype PropEventSource<T> = {\n    on<K extends string & keyof T>\n        (eventName: `${K}Changed`, callback: (newValue: T[K]) => void ): void;\n};\n\n/// Create a "watched object" with an \'on\' method\n/// so that you can watch for changes to properties.\ndeclare function makeWatchedObject<T>(obj: T): T & PropEventSource<T>;\n\nperson.on("firstNameChanged", () => {}); // works!\nperson.on("lastNameChanged", () => {});  // error!\n\n// works! \'newName\' is typed as \'string\'\nperson.on("firstNameChanged", newName => {\n    // \'newName\' has the type of \'firstName\'\n    console.log(`new name is ${newName.toUpperCase()}`);\n});\n \n// works! \'newAge\' is typed as \'number\'\nperson.on("ageChanged", newAge => {\n    if (newAge < 0) {\n        console.log("warning! negative age");\n    }\n})\n\n// 2. \u6620\u5c04\u7c7b\u578b\u4e2d\u7684\u952e\u91cd\u6620\u5c04\n// 2.1 \u56de\u987e\n// * \u6620\u5c04\u7c7b\u578b\u53ef\u4ee5\u57fa\u4e8e\u4efb\u610f\u952e\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u7c7b\u578b\ntype Options = {\n  [K in "noImplicitAny" | "strictNullChecks" | "strictFunctionTypes"]?: boolean;\n};\n// same as\n//   type Options = {\n//       noImplicitAny?: boolean,\n//       strictNullChecks?: boolean,\n//       strictFunctionTypes?: boolean\n//   };\n\n/// * \u9664\u6b64\u4e4b\u5916\uff0c \'Partial<T>\' \u6211\u4eec\u4e00\u5b9a\u4e0d\u964c\u751f\uff0c\u6211\u4eec\u7ee7\u627f\u4e00\u4e2a\u8d85\u96c6\u4f46\u4ec5\u4f7f\u7528\u90e8\u5206\u5fc5\u4f20\u5c5e\u6027\u65f6\uff0c\u5b83\u53ef\u4ee5\u5e2e\u6211\u4eec\u5c06\u8d85\u96c6\u7684\u6240\u6709\u5c5e\u6027\u53d8\u4e3a\u53ef\u9009\ninterface BasicProps {\n    name: string;\n}\nconst partialProps: BasicProps = {}   // error!\n\ntype PartialProps = Partial<BasicProps>;\n// same as\n//   type PartialProps = {\n//       name?: string,\n//   }\nconst rewriteProps: PartialProps = {} // works!\n// \u4f46\u5f88\u591a\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u521b\u5efa\u7684\u952e\u53bb\u751f\u6210\uff0c\u800c\u4e0d\u662f\u4e3a\u6bcf\u4e2a\u91cd\u6620\u5c04\u63d0\u4f9b\u4e00\u4e2a\u89c4\u5b9a\u7684\u952e\n\n// 2.2 \u5728\u952e\u7684\u91cd\u6620\u5c04\u4e2d\u4f7f\u7528 as\ntype Getters<T> = {\n    [K in keyof T as `get${Capitalize<string & K>}`]: () => T[K]\n};\n\ninterface Person {\n    name: string;\n    age: number;\n    location: string;\n}\n\n// returns {\n//    getName: () => string;\n//    getAge: () => number;\n//    getLocation: () => string;\n// }\ntype LazyPerson = Getters<Person>;\n\n// 2.3 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u6211\u4eec\u9700\u8981\u8fc7\u6ee4\u4e00\u90e8\u5206\u4e0d\u9700\u8981\u7684\u5c5e\u6027\uff0c\u4f46\u6211\u4eec\u4e0d\u518d\u9700\u8981\u4f7f\u7528\u989d\u5916\u7684Omit\u5e2e\u52a9\u5668\u7c7b\u578b\n// Remove the \'kind\' property\ntype RemoveKindField<T> = {\n    [K in keyof T as Exclude<K, "kind">]: T[K]\n};\n\ninterface Circle {\n    kind: "circle";\n    radius: number;\n    size: number;\n}\n// returns {\n//    radius: number;\n//    size: number;\n// }\ntype KindlessCircle = RemoveKindField<Circle>;\n\n// 2.4 \u6211\u4eec\u4e5f\u53ef\u4ee5\u5c06 2.3 \u8fdb\u884c\u6269\u5c55\uff0c\u4ece\u5916\u90e8\u51b3\u5b9a\u4ec0\u4e48\u5c5e\u6027\u662f\u5e94\u8be5\u88ab shake \u6389\u7684\ntype RemoveKindFieldExclude<T, U = never> = {\n    [K in keyof T as Exclude<K, U>]: T[K]\n};\n// returns {\n//    size: number;\n// }\ntype KindlessCircleA = RemoveKindFieldExclude<Circle, \'kind\' | \'radius\'>;\n\n// 3. \u9012\u5f52\u6761\u4ef6\u7c7b\u578b\n// 3.1 \u91cd\u590d\u5b57\u7b26\u4e32\n// refer @see https://juejin.cn/post/7039856272354574372#heading-17\ntype RepeatStr<Str extends string,\n                Count, \n                Arr extends Str[] = [],\n                ResStr extends string = \'\'> \n = Arr[\'length\'] extends Count \n ? ResStr \n : RepeatStr<Str,Count, [Str, ...Arr], `${Str}${ResStr}`>;\n\ntype ISOYear = RepeatStr<\'Y\', 4> | RepeatStr<\'Y\', 2>;\ntype ISOMonth = RepeatStr<\'M\', 2> | RepeatStr<\'M\', 1>;\ntype ISODay = RepeatStr<\'D\', 2> | RepeatStr<\'D\', 1>;\ntype ISODate = `${ISOYear}-${ISOMonth}-${ISODay}`;\n\n// * \u4f7f\u7528 ISODate\nconst today: ISODate = \'YYYY-M-D\';\n \n// 3.2 \u88ab\u6ee5\u7528\u7684\u9012\u5f52: \u83b7\u53d6\u52a0\u6cd5\u8fd0\u7b97\u9759\u6001\u7ed3\u679c\u503c\n// refer @see https://juejin.cn/post/7039856272354574372#heading-17\ntype createArray<Len, Ele, Arr extends Ele[] = []> =  Arr[\'length\'] extends Len ? Arr : createArray<Len, Ele, [Ele, ...Arr]>\n\ntype Sum<A extends number, B extends number> = [...createArray<A, 1>, ...createArray<B, 1>][\'length\']\n\n// * \u4f7f\u7528 Sum \u7c7b\u578b\nconst addend = 1;\nconst addition = 2;\nconst total = addend + addition;\n\n// returns number\ntype GenericTotalQuantity = typeof total;\n// returns 3\ntype RecursiveTotalQuantity = Sum<typeof addend, typeof addition>;\n\n// * \u4efb\u4f55\u8bed\u8a00\u7684\u9012\u5f52\u90fd\u4f1a\u6d88\u8017\u6267\u884c\u6808\uff0c\u4e14\u6267\u884c\u6808\u5b58\u5728\u4e0a\u9650\uff0c\u6240\u4ee5\u4e0b\u6bb5\u4ee3\u7801\u4e0d\u4f1a\u88ab TS \u6267\u884c\uff0c\u800c\u662f\u629b\u51fa\u9519\u8bef\u5e76\u8fd4\u56de plain type\n// expected 2023, but returns number\ntype HappyNewYear = Sum<2022, 1>;\n\n// 3.3 \u83b7\u53d6\u6570\u7ec4\u4e2d\u6bcf\u4e2a\u5143\u7d20\u53ef\u80fd\u7684\u503c\u7c7b\u578b\n// * \u83b7\u53d6\u9759\u6001\u7684\u5b57\u9762\u91cf\u7c7b\u578b\u53ef\u4ee5\u7ed9\u53d8\u91cf\u52a0\u4e0a \u5e38\u91cf\u7c7b\u578b\u65ad\u8a00 (as private)\nconst authEscapes = [\'PM\', \'Dev\', \'Ops\'] as const;\ntype AuthEscapesType = typeof authEscapes;\n\n// ? T as Type, U as Tuple, E as Element (for Array)\ntype ElementOf<T extends readonly[...T], E = never, U extends never[] = []> = U[\'length\'] extends T[\'length\'] ? E : ElementOf<T, E | T[U[\'length\']], [...U, never]>;\n\n// returns "PM" | "Dev" | "Ops"\ntype ElementResult = ElementOf<AuthEscapesType>;\n\n// * \u6269\u5c55\u5143\u7d20\u7684\u53ef\u80fd\u6027\n// returns "PM" | "Dev" | "Ops" | "ZZX" | "97z"\ntype ElementExtend = ElementOf<AuthEscapesType, \'ZZX\' | \'97z\'>;\n\n// \u4f7f\u7528 ElementResult\nconst role: ElementResult = \'Dev\';  // works!\nconst me: ElementResult = \'ZZX\';    // error!\nconst netMe: ElementExtend = \'97z\'; // works!\n\n// \u901a\u8fc7\u9012\u5f52\u6784\u9020\u6570\u7ec4\u6765\u8ba1\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u6279\u91cf\u751f\u6210 2th \u5c0f\u8282\u7684\u5176\u4ed6\u7c7b\u578b\u5b9a\u4e49\n\n// 4. \u7ed3\u8bed\n// Why ? \u6211\u53ea\u9700\u8981\u4e00\u4e2a\u7b80\u5355\u7684\u7c7b\u578b like type VeryEasy = "PM" | "DEV" | "Ops"\n// \u4e3a\u4ec0\u4e48\u6211\u8981\u641e\u5f97\u90a3\u4e48\u590d\u6742\uff0c\u4e3a\u4ec0\u4e48\u6211\u8981\u4e3a\u6b64\u6d6a\u8d39\u5de5\u65f6\uff0cWhy? (\u9ed1\u4eba\u6d41\u6c57\u3001\u65e0\u8bed + \u644a\u624b.gif)\n\n/*\n * \u8fd9\u4e2a\u7c7b\u578b\u7684\u5b9a\u4e49\u5c06\u662f\u52a8\u6001\u7684\uff0c\u610f\u5473\u7740\u65e0\u8bba\u4ee5\u540e\u5982\u4f55\u6539\u53d8\u6211\u4eec\u7684 const / enum / config / tuple \u7b49\u7b49\uff0c\u90fd\u5c06\u4e0d\u518d\u9700\u8981\u66f4\u6539 type \u4e0e interface\n * \u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u8ba9\u5b83\u4f5c\u7528\u5728 everywhere\uff0c\u8fd9\u5f88\u68d2\u4e0d\u662f\u5417\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\uff1a\n * - \u4e25\u683c\u7684 ts \u68c0\u9a8c\u5e2e\u6211\u4eec\u89c4\u907f\u4e86 bug\n * - \u4fee\u6539\u4ee3\u7801\u65f6\u4e0d\u518d\u9700\u8981\u67e5\u627e\u5e76\u4fee\u6539\u5bf9\u5e94\u7684\u9759\u6001\u7c7b\u578b\n * - \u901a\u8fc7\u5b9a\u4e49\u7c7b\u578b\u83b7\u5f97\u7684\u667a\u80fd\u8865\u5168\u83dc\u5355\u5217\u8868\n */\n\ndeclare function Moment (date: number, format: ISODate): ISODate\n// \u5728 quotes \u4e2d\u4fee\u6539\uff0c\u8bd5\u8bd5\u8fd9 everything is ok \u7684\u667a\u80fd\u8865\u5168\u5427\nconst urRole: ElementResult = "Dev";\nconst urBirthday: ISODate = Moment(1678377600000, "YY-M-D");\nconst urFavBasicColorHex: RGB = "#ff0000"\n\n')))}y.isMDXComponent=!0}}]);