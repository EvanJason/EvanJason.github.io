"use strict";(self.webpackChunklwl_docusaurus_website=self.webpackChunklwl_docusaurus_website||[]).push([[9596],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>h});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),u=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(o.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(t),m=r,h=p["".concat(o,".").concat(m)]||p[m]||d[m]||l;return t?a.createElement(h,i(i({ref:n},c),{},{components:t})):a.createElement(h,i({ref:n},c))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=m;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var u=2;u<l;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3706:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>u});var a=t(7462),r=(t(7294),t(3905));const l={title:"\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6",categories:["Vue","el-select"],tags:["Vue","el-select"],date:"2024-07-05",author:"\u6df1\u6d77\u5982\u68a6",excerpt:"\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6"},i=void 0,s={unversionedId:"Vue/\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6",id:"Vue/\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6",title:"\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6",description:"CascaderTime",source:"@site/docs/Vue/\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6.md",sourceDirName:"Vue",slug:"/Vue/\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6",permalink:"/docs/Vue/\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6",draft:!1,editUrl:"https://github.com/evanjason/evanjason.github.io/tree/main/docs/Vue/\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6.md",tags:[{label:"Vue",permalink:"/docs/tags/vue"},{label:"el-select",permalink:"/docs/tags/el-select"}],version:"current",frontMatter:{title:"\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6",categories:["Vue","el-select"],tags:["Vue","el-select"],date:"2024-07-05",author:"\u6df1\u6d77\u5982\u68a6",excerpt:"\u81ea\u5b9a\u4e49\u7ea7\u8054\u7ec4\u4ef6"},sidebar:"tutorialSidebar",previous:{title:"vue2 element-ui el-cascader\u591a\u9009\u6837\u5f0f\u4f18\u5316",permalink:"/docs/Vue/vue2 element-ui el-cascader\u591a\u9009\u6837\u5f0f\u4f18\u5316"},next:{title:"\u8def\u7531\u52a8\u6001\u6dfb\u52a0\u4fee\u6539\u5220\u9664",permalink:"/docs/Vue/\u8def\u7531\u52a8\u6001\u6dfb\u52a0\u4fee\u6539\u5220\u9664"}},o={},u=[{value:"CascaderTime",id:"cascadertime",level:2}],c={toc:u},p="wrapper";function d(e){let{components:n,...t}=e;return(0,r.kt)(p,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"cascadertime"},"CascaderTime"),(0,r.kt)("p",null,"constants.js"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"/**\n * \u65e5\u671f\u7c7b\u578b\u7ea7\u8054\u5217\u8868\n */\nexport const dateOptionsList = [\n  {\n    label: '\u6309\u5929',\n    value: 'day',\n    children: [\n      {\n        label: '\u5f53\u65e5',\n        parentType: 'day',\n        value: '0',\n      },\n      {\n        label: '\u6b21\u65e5',\n        parentType: 'day',\n        value: '1',\n      },\n      {\n        label: '7\u65e5',\n        parentType: 'day',\n        value: '7',\n      },\n      {\n        label: '14\u65e5',\n        parentType: 'day',\n        value: '14',\n      },\n      {\n        label: '30\u65e5',\n        parentType: 'day',\n        value: '30',\n        isCustom: true,\n        defalutValue: 30,\n      },\n    ],\n  },\n  {\n    label: '\u6309\u5468',\n    value: 'week',\n    children: [\n      {\n        label: '\u5f53\u5468',\n        parentType: 'week',\n        value: '0',\n      },\n      {\n        label: '\u6b21\u5468',\n        parentType: 'week',\n        value: '1',\n      },\n      {\n        label: '4\u5468',\n        parentType: 'week',\n        value: '4',\n      },\n      {\n        label: '8\u5468',\n        parentType: 'week',\n        value: '8',\n      },\n      {\n        label: '16\u5468',\n        value: '16',\n        parentType: 'week',\n        isCustom: true,\n        defalutValue: 16,\n      },\n    ],\n  },\n  {\n    label: '\u6309\u6708',\n    value: 'month',\n    children: [\n      {\n        label: '\u5f53\u6708',\n        parentType: 'month',\n        value: '0',\n      },\n      {\n        label: '\u6b21\u6708',\n        parentType: 'month',\n        value: '1',\n      },\n      {\n        label: '3\u6708',\n        parentType: 'month',\n        value: '3',\n      },\n      {\n        label: '6\u6708',\n        parentType: 'month',\n        value: '6',\n      },\n      {\n        label: '12\u6708',\n        value: '12',\n        parentType: 'month',\n        isCustom: true,\n        defalutValue: 12,\n      },\n    ],\n  },\n]\n\n/**\n * \u65e5\u671f\u7c7b\u578b\u6620\u5c04\n */\nexport const dateMap = {\n  day: '\u65e5',\n  week: '\u5468',\n  month: '\u6708',\n}\n")),(0,r.kt)("p",null,"\u4ee3\u7801"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div>\n    <el-select\n      :disabled="disabled"\n      placeholder="\u8bf7\u9009\u62e9"\n      :value="timeSelect.name"\n      ref="treeSelect"\n      @visible-change="changeVisible"\n      popper-class="cascader-time-dropdown"\n      :popper-append-to-body="true"\n      style="width: 120px;"\n      :style="{ width: isFromDashboard ? \'100px\' : \'120px\', marginRight: isFromDashboard ? \'5px\' : \'0\' }"\n    >\n      <el-option v-show="false" value=""></el-option>\n      <div style="position: relative">\n        <div class="todos">\n          <div v-for="(group, index) in cascaderList" :key="group.label">\n            <div class="content">\n              <div class="mul" :class="timeSelect.parentType === group.value ? \'active\' : \'\'" @mouseover="handleMouseOver(group)">\n                <div style="font-size: 14px">{{ group.label }}</div>\n                <div>\n                  <i class="el-icon-right" style="font-size: 14px"></i>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="tooltip" v-if="cascaderChildren">\n            <div class="card">\n              <div v-for="item in cascaderChildren || []" :key="item.label">\n                <div class="mul" :class="handleShowHoverClass(item)" @click.stop="changeTimeUnit(cascaderItems.value, item)">\n                  <div v-if="!item.isCustom" class="content">{{ item.label }}</div>\n                  <div v-else style="display: flex; margin-top: 5px">\n                    <el-input-number\n                      style="width: 60px"\n                      v-model="timeCustomValue"\n                      :min="1"\n                      @focus="timecustomFocus"\n                      @blur="timecustomBlur"\n                      @change="timeCustomValueChange"\n                      :controls="false"\n                    ></el-input-number>\n                    <span style="margin-left: 5px">{{ dateMap[item.parentType] }}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </el-select>\n  </div>\n</template>\n<script>\nimport { dateOptionsList, dateMap } from \'./constants\'\nexport default {\n  name: \'CascaderTime\',\n  props: {\n    disabled: {\n      type: Boolean\n    },\n    isFromDashboard: {\n      type: Boolean,\n      default: false,\n    },\n    timeSelect: {\n      type: Object,\n    },\n    defaultValue: {\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      dateMap,\n      cascaderList: [],\n      cascaderItems: null,\n      cascaderChildren: null,\n      timeCustomValue: 0,\n      isTimeCustomFocus: false,\n    }\n  },\n  mounted() {\n    this.$emit(\'init\', this.timeSelect)\n    this.changeVisible(true)\n  },\n  methods: {\n    /**\n     * \u9009\u4e2d\u6539\u53d8\n     * @param {*} type\n     * @param {*} item\n     */\n    changeTimeUnit(type, item) {\n      if (this.isTimeCustomFocus) return\n      const { value, defalutValue, label, parentType, isCustom } = item\n      let result;\n      if (isCustom) {\n        result = { name: `${this.timeCustomValue}${dateMap[parentType]}`, ...item, customValue: this.timeCustomValue }\n      } else {\n        result = { name: label, ...item }\n      }\n      this.$refs.treeSelect.visible = false\n      this.$emit(\'change\', result)\n    },\n    handleMouseOver(group) {\n      this.cascaderItems = group\n      this.cascaderChildren = group.children\n      this.timeCustomValue =\n        group.children.find((it) => it.isCustom).parentType === this.timeSelect.parentType && this.timeSelect.customValue\n          ? this.timeSelect.customValue\n          : group.children.find((it) => it.isCustom)?.defalutValue\n    },\n    timecustomFocus(e) {\n      this.isTimeCustomFocus = true\n    },\n    timecustomBlur(e) {\n      this.isTimeCustomFocus = false\n    },\n    timeCustomValueChange(val) {\n      this.isTimeCustomFocus = true\n      this.timeCustomValue = val\n    },\n    changeVisible(show) {\n      this.timeSelect = !this.timeSelect.name ? this.defaultValue : this.timeSelect\n      if (show) {\n        this.cascaderList = dateOptionsList\n        // \u56de\u663e\u6570\u636e\u5c55\u793a\n        let groupItems = dateOptionsList.find((it) => it.value === this.timeSelect.parentType)\n        this.cascaderItems = groupItems\n        this.cascaderChildren = groupItems.children\n        this.timeCustomValue = this.timeSelect.customValue || groupItems.children.find((it) => it.isCustom)?.defalutValue || 30\n      } else {\n        this.cascaderChildren = null\n        this.cascaderItems = null\n      }\n    },\n    handleShowHoverClass(item) {\n      // \u81ea\u5b9a\u4e49\n      if (item.parentType === this.timeSelect.parentType && this.timeSelect.customValue) {\n        return this.timeSelect.defalutValue === item.defalutValue ? \'active\' : \'\'\n      }\n      return this.timeSelect.name === item.label ? \'active\' : \'\'\n    },\n  },\n}\n<\/script>\n<style lang="scss" src="./index.scss"></style>\n')),(0,r.kt)("p",null,"index.scss"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scss"},".cascader-time-dropdown {\n  .tooltip {\n    position: absolute;\n    right: -3px;\n    transform: translateX(100%);\n    top: -8px;\n    min-width: 150px;\n    .card {\n      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n      border-radius: 4px;\n      border: 1px solid #ebeef5;\n      background: #fff;\n      padding: 0;\n      font-size: 12px;\n    }\n  }\n  .mul {\n    line-height: 40px;\n    padding-left: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-right: 10px;\n    &:hover {\n      background: var(--98du-defalut-bgc);\n    }\n    &.active {\n      color: var(--98du-primary-color);\n      background: var(--98du-defalut-bgc);\n    }\n  }\n  .content {\n    color: #666;\n    font-size: 12px;\n  }\n  .el-scrollbar {\n    overflow: inherit !important;\n  }\n  .el-scrollbar__wrap {\n    margin: 0 !important;\n    overflow: inherit !important;\n    &::-webkit-scrollbar {\n      overflow: hidden;\n    }\n  }\n  .el-scrollbar__bar {\n    display: none;\n  }\n\n  .el-form-item {\n    margin-bottom: 0;\n  }\n  .el-form-item__error {\n    top: 50%;\n    left: auto;\n    right: 10px;\n    transform: translateY(-50%);\n    padding-top: 0;\n    user-select: none;\n  }\n  .el-form-item.is-error .el-date-editor.el-range-editor.el-input__inner {\n    border-color: #ff4949;\n  }\n  .el-date-editor.el-range-editor.el-input__inner:hover {\n    border-color: var(--98du-primary-color);\n  }\n  .el-form-item--medium .el-form-item__content {\n    line-height: 36px;\n  }\n}\n")))}d.isMDXComponent=!0}}]);