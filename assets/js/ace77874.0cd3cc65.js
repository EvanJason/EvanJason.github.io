"use strict";(self.webpackChunklwl_docusaurus_website=self.webpackChunklwl_docusaurus_website||[]).push([[9388],{3905:(n,e,t)=>{t.d(e,{Zo:()=>p,kt:()=>m});var r=t(7294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function c(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function i(n,e){if(null==n)return{};var t,r,a=function(n,e){if(null==n)return{};var t,r,a={},o=Object.keys(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var s=r.createContext({}),l=function(n){var e=r.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):c(c({},e),n)),t},p=function(n){var e=l(n.components);return r.createElement(s.Provider,{value:e},n.children)},u="mdxType",f={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},d=r.forwardRef((function(n,e){var t=n.components,a=n.mdxType,o=n.originalType,s=n.parentName,p=i(n,["components","mdxType","originalType","parentName"]),u=l(t),d=a,m=u["".concat(s,".").concat(d)]||u[d]||f[d]||o;return t?r.createElement(m,c(c({ref:e},p),{},{components:t})):r.createElement(m,c({ref:e},p))}));function m(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var o=t.length,c=new Array(o);c[0]=d;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=n,i[u]="string"==typeof n?n:a,c[1]=i;for(var l=2;l<o;l++)c[l]=t[l];return r.createElement.apply(null,c)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},8535:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>c,default:()=>f,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var r=t(7462),a=(t(7294),t(3905));const o={title:"\u6f0f\u6597\u56fe\u5c01\u88c5",categories:["Echarts","\u6f0f\u6597\u56fe"],tags:["Echarts","\u6f0f\u6597\u56fe"],date:"2023-09-04",authors:"lin",excerpt:"\u6f0f\u6597\u56fe\u5c01\u88c5"},c="\u6f0f\u6597\u56fe\u5c01\u88c5",i={unversionedId:"Echart/\u6f0f\u6597\u56fe\u5c01\u88c5",id:"Echart/\u6f0f\u6597\u56fe\u5c01\u88c5",title:"\u6f0f\u6597\u56fe\u5c01\u88c5",description:"\u989c\u8272\u914d\u7f6e",source:"@site/docs/Echart/\u6f0f\u6597\u56fe\u5c01\u88c5.md",sourceDirName:"Echart",slug:"/Echart/\u6f0f\u6597\u56fe\u5c01\u88c5",permalink:"/docs/Echart/\u6f0f\u6597\u56fe\u5c01\u88c5",draft:!1,editUrl:"https://github.com/EvanJason/EvanJason.github.io/tree/main/docs/Echart/\u6f0f\u6597\u56fe\u5c01\u88c5.md",tags:[{label:"Echarts",permalink:"/docs/tags/echarts"},{label:"\u6f0f\u6597\u56fe",permalink:"/docs/tags/\u6f0f\u6597\u56fe"}],version:"current",frontMatter:{title:"\u6f0f\u6597\u56fe\u5c01\u88c5",categories:["Echarts","\u6f0f\u6597\u56fe"],tags:["Echarts","\u6f0f\u6597\u56fe"],date:"2023-09-04",authors:"lin",excerpt:"\u6f0f\u6597\u56fe\u5c01\u88c5"},sidebar:"tutorialSidebar",previous:{title:"React-Echarts\u56fe\u8868\u70b9\u51fb\u4e8b\u4ef6",permalink:"/docs/Echart/React-Echarts\u56fe\u8868\u70b9\u51fb\u4e8b\u4ef6"},next:{title:"React Hooks 18 useEffect \u6267\u884c2\u6b21\u6216\u591a\u6b21\u7684\u89e3\u51b3\u529e\u6cd5",permalink:"/docs/Error/React Hooks 18 useEffect \u6267\u884c2\u6b21\u6216\u591a\u6b21\u7684\u89e3\u51b3\u529e\u6cd5"}},s={},l=[{value:"\u989c\u8272\u914d\u7f6e",id:"\u989c\u8272\u914d\u7f6e",level:2},{value:"\u4ee3\u7801\u5c55\u793a",id:"\u4ee3\u7801\u5c55\u793a",level:2}],p={toc:l},u="wrapper";function f(n){let{components:e,...t}=n;return(0,a.kt)(u,(0,r.Z)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u6f0f\u6597\u56fe\u5c01\u88c5"},"\u6f0f\u6597\u56fe\u5c01\u88c5"),(0,a.kt)("h2",{id:"\u989c\u8272\u914d\u7f6e"},"\u989c\u8272\u914d\u7f6e"),(0,a.kt)("p",null,"constans.ts"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"/* ======================== Beautify ========================= */\n// \u7531\u4e8e ECharts \u9ed8\u8ba4\u53ea\u63d0\u4f9b\u4e86 9 \u4e2a slice \u7684\u989c\u8272, \u800c\u4e1a\u52a1\u4e2d\u4e0a\u9650\u4e3a 10 \u4e2a slice, \u6240\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e2a\u957f\u5ea6\u4e3a 10 \u7684\u989c\u8272\u7ec4\n// \u524d\u4e5d\u9879\u4e3a\u5b98\u7f51\u7684\u9ed8\u8ba4\u503c (ECharts@5.4.2 2023/05/12)\nexport const SLICE_COLORS: string[] = [\n    '#5470c6',\n    '#91cc75',\n    '#fac858',\n    '#ee6666',\n    '#73c0de',\n    '#3ba272',\n    '#fc8452',\n    '#9a60b4',\n    '#ea7ccc',\n    '#66cccc',\n    \"#6482db\",\n    \"#7fe383\",\n    \"#ffd45c\",\n    \"#ff5454\",\n    \"#72b7e6\",\n    \"#61c17e\",\n    \"#ff864d\",\n    \"#ce84d3\",\n    \"#e3aadf\",\n    \"#7db5b5\"\n]\n")),(0,a.kt)("h2",{id:"\u4ee3\u7801\u5c55\u793a"},"\u4ee3\u7801\u5c55\u793a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import React from 'react';\nimport ReactEcharts from 'echarts-for-react';\nimport { SLICE_COLORS } from './constans'\n\ninterface Props_FunnelChart {\n    funnelData: any[]\n    isFromDashboard?: boolean\n    isScreen?: boolean\n}\n\nconst FunnelChart = (props: Props_FunnelChart) => {\n\n    const getOption = (funnelData) => {\n        const { isFromDashboard, isScreen } = props\n        const seriesData = convertData(funnelData)\n        return {\n            color: SLICE_COLORS,\n            tooltip: {\n                trigger: 'item',\n                extraCssText: `max-height: ${isScreen ? '50%' : (isFromDashboard ? '80%' : '250px')}; overflow: auto;margin-left: 20px`,\n                backgroundColor: 'rgba(255,255,255,0.8)',\n                confine: true,\n                enterable: true,\n                formatter: (params) => {\n                    return `\n                    <div style=\"display: flex; flexDirection: 'row'; \">\n                    <div>\n                        ${params.marker}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                    </div>\n                    <div>\n                        ${params.name}\uff1a${params.value ? params.value.toLocaleString() : 0}\n                    </div>\n                </div>\n                    `\n                }\n            },\n            series: [\n                {\n                    name: \"\u6f0f\u6597\u56fe\",\n                    type: 'funnel',\n                    min: 0,\n                    top: 0,\n                    right: 150,\n                    minSize: '15%',\n                    height: '100%',\n                    sort: 'descending',\n                    gap: 0,\n                    labelLine: {\n                        show: false,\n                    },\n                    label: {//\u6f0f\u6597\u5916\u90e8\u663e\u793a\u7684\n                        position: 'rightTop',  //\u4f4d\u7f6e\n                        // formatter: 'rate: {d}%', //\u663e\u793a\u7684\u5185\u5bb9\n                        formatter: (params) => {\n                            return params.data.percent ? `\u2014\u2014  \u8f6c\u5316\u7387: ${params.data.percent}%` : ''\n                        },\n                        padding: [0, 0, 0, -10],\n                        fontStyle: 'normal',\n                        fontSize: 12,\n                        textBorderColor: '#000',\n                    },\n                    emphasis: {  //\u9f20\u6807\u79fb\u5165\u6570\u636e\u9879\u7684tooltip\u8bbe\u7f6e\n                        show: false\n                    },\n                    itemStyle: {\n                        opacity: 0.7,\n                    },\n\n                    data: seriesData,\n                },\n                {\n                    name: \"\u8f85\u52a9\",\n                    type: 'funnel',\n                    min: 0,\n                    top: 0,\n                    right: 150,\n                    minSize: '15%',\n                    height: '100%',\n                    sort: 'descending',\n                    gap: 0,\n\n                    label: {  //\u8bbe\u7f6e\u5b57\u4f53\u653e\u5728\u6f0f\u6597\u5185\u90e8\n                        position: 'inside',\n                        formatter: '{b}   {c}',\n                        fontStyle: 'normal',\n                        fontSize: 12,\n                        color: '#ffffff',\n                    },\n                    emphasis: {\n                        label: {\n                            fontSize: 14   //\u9f20\u6807\u79fb\u5165\u5b57\u4f53\u53d8\u5927 \u663e\u793atoolList\n                        }\n                    },\n                    itemStyle: {\n                        opacity: 0.9,\n                    },\n\n                    data: seriesData,\n                    z: 100\n                }\n            ]\n        };\n    };\n\n    // \u8ba1\u7b97\u6f0f\u6597\u7387\n    const convertData = (data) => {\n        return data.map((item, index, arr) => {\n            if (index > 0) {\n                const beforeValue = arr?.[index - 1]?.value;\n                const percent = ((item.value / beforeValue) * 10000 / 100).toFixed(2);\n                return {\n                    ...item,\n                    percent\n                }\n            }\n            return {\n                ...item,\n            };\n        });\n    }\n\n    const { funnelData } = props\n    return (\n        <ReactEcharts\n            option={getOption(funnelData)}\n            style={{ width: '100%', height: '100%' }}\n            opts={{ renderer: 'svg' }}\n        />\n    );\n};\n\nexport default FunnelChart;\n")))}f.isMDXComponent=!0}}]);