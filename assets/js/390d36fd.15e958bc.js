"use strict";(self.webpackChunklwl_docusaurus_website=self.webpackChunklwl_docusaurus_website||[]).push([[7872],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>m});var l=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=l.createContext({}),s=function(e){var t=l.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},h=function(e){var t=s(e.components);return l.createElement(o.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},p=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,h=c(e,["components","mdxType","originalType","parentName"]),d=s(n),p=a,m=d["".concat(o,".").concat(p)]||d[p]||u[p]||r;return n?l.createElement(m,i(i({ref:t},h),{},{components:n})):l.createElement(m,i({ref:t},h))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=p;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c[d]="string"==typeof e?e:a,i[1]=c;for(var s=2;s<r;s++)i[s]=n[s];return l.createElement.apply(null,i)}return l.createElement.apply(null,n)}p.displayName="MDXCreateElement"},7904:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>s});var l=n(7462),a=(n(7294),n(3905));const r={title:"Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e",categories:["antd","Angular"],tags:["antd","\u8868\u683c","\u81ea\u5b9a\u4e49"],date:"2021-10-10",author:"\u6df1\u6d77\u5982\u68a6",excerpt:"Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e"},i="Angular \u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e",c={unversionedId:"Angular/Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e",id:"Angular/Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e",title:"Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e",description:"\u6548\u679c\u56fe",source:"@site/docs/Angular/Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e.md",sourceDirName:"Angular",slug:"/Angular/Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e",permalink:"/docs/Angular/Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Angular/Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e.md",tags:[{label:"antd",permalink:"/docs/tags/antd"},{label:"\u8868\u683c",permalink:"/docs/tags/\u8868\u683c"},{label:"\u81ea\u5b9a\u4e49",permalink:"/docs/tags/\u81ea\u5b9a\u4e49"}],version:"current",frontMatter:{title:"Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e",categories:["antd","Angular"],tags:["antd","\u8868\u683c","\u81ea\u5b9a\u4e49"],date:"2021-10-10",author:"\u6df1\u6d77\u5982\u68a6",excerpt:"Angular\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e"},sidebar:"tutorialSidebar",previous:{title:"Angular\u5149\u6807\u5904\u63d2\u5165\u56fe\u7247\u529f\u80fd",permalink:"/docs/Angular/Angular\u5149\u6807\u5904\u63d2\u5165\u56fe\u7247\u529f\u80fd"},next:{title:"antd\u8868\u683c\u7a7f\u68ad\u6846\u529f\u80fd",permalink:"/docs/Angular/antd\u8868\u683c\u7a7f\u68ad\u6846\u529f\u80fd"}},o={},s=[{value:"\u6548\u679c\u56fe",id:"\u6548\u679c\u56fe",level:2},{value:"ts \u4ee3\u7801",id:"ts-\u4ee3\u7801",level:2},{value:"global.service.ts",id:"globalservicets",level:3},{value:"app.component.ts",id:"appcomponentts",level:3},{value:"html \u4ee3\u7801",id:"html-\u4ee3\u7801",level:2}],h={toc:s},d="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,l.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"angular-\u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e"},"Angular \u8868\u683c\u81ea\u5b9a\u4e49\u5217\u914d\u7f6e"),(0,a.kt)("h2",{id:"\u6548\u679c\u56fe"},"\u6548\u679c\u56fe"),(0,a.kt)("p",null,"\u7565"),(0,a.kt)("h2",{id:"ts-\u4ee3\u7801"},"ts \u4ee3\u7801"),(0,a.kt)("h3",{id:"globalservicets"},"global.service.ts"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Injectable } from '@angular/core';\n@Injectable({\n    providedIn: 'root',\n})\nexport class Global {\n    public thOfData: any[] = [];\n    public indeterminateTh = false;\n    public checkedTh = true;\n    public setOfThCheckedId = null;\n    public changeTh = false;\n    public isShowTable = true;\n\n    /**\n     * \u521d\u59cb\u5316\u5217\u5c55\u793a\n     * @param data\n     */\n    public initSetTHcheckedFun(data: any[]) {\n        // console.log(data);\n        let defalutTh = [];\n        for (const item of data) {\n            if (item.checked) {\n                defalutTh.push(item.id);\n            }\n        }\n        this.setOfThCheckedId = new Set<number>(defalutTh);\n    }\n\n    /**\n     * \u5168\u9009\u5217\u5c55\u793a\u64cd\u4f5c\n     * @param checked\n     */\n    public onAllThChecked(checked: boolean): void {\n        this.changeTh = true;\n        this.thOfData.forEach(({ id }) => this.updateThCheckedSet(id, checked));\n        this.refreshThCheckedStatus();\n    }\n\n    /**\n     * \u91cd\u7f6e\u5217\u5c55\u793a\n     */\n    public resetTh() {\n        this.onAllThChecked(true);\n    }\n\n    /**\n     * \u5217\u5c55\u793a-\u5355\u9009\n     * @param id\n     * @param checked\n     */\n    public onItemThChecked(id: number, checked: boolean): void {\n        this.changeTh = true;\n        this.updateThCheckedSet(id, checked);\n        this.refreshThCheckedStatus();\n    }\n\n    /**\n     * \u8fdb\u884c\u5217\u5c55\u793a\u5355\u9009\u64cd\u4f5c\n     * @param id\n     * @param checked\n     */\n    public updateThCheckedSet(id: number, checked: boolean): void {\n        if (checked) {\n            this.setOfThCheckedId.add(id);\n        } else {\n            this.setOfThCheckedId.delete(id);\n        }\n\n        this.thOfData.forEach((item) => {\n            item.checked = this.setOfThCheckedId.has(item.id);\n        });\n\n        // \u5f53\u5217\u5c55\u793a\u5168\u4e0d\u9009\u65f6\uff0c\u6570\u636e\u4e3a\u7a7a\n        if (this.thOfData.every((item) => !item.checked)) {\n            this.isShowTable = false;\n        } else {\n            this.isShowTable = true;\n        }\n    }\n\n    /**\n     * \u66f4\u65b0\u5217\u5c55\u793a\u7684\u72b6\u6001\n     */\n    public refreshThCheckedStatus(): void {\n        this.checkedTh = this.thOfData.every(({ id }) => this.setOfThCheckedId.has(id));\n        this.indeterminateTh = this.thOfData.some(({ id }) => this.setOfThCheckedId.has(id)) && !this.checkedTh;\n    }\n}\n")),(0,a.kt)("h3",{id:"appcomponentts"},"app.component.ts"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Global } from \'src/app/common/pastData.service\';\n\n...\n\n\nthis.globalCommon.isShowTable = true;\nlet thOfData = [\n    { id: 1, value: !this.isShowtd ? "\u65b0\u589e\u6ce8\u518c" : null, key: !this.isShowtd ? "newUsers" : null, checked: true },\n    { id: 2, value: "\u65b0\u589e\u521b\u89d2", key: "newRoles", checked: true },\n    { id: 3, value: "\u9996\u6b21\u521b\u89d2", key: "firstRoles", checked: true },\n    { id: 4, value: "\u8001\u7528\u6237\u6d3b\u8dc3", key: "oldActive", checked: true },\n    { id: 5, value: "\u603b\u6d3b\u8dc3", key: "totalActive", checked: true },\n    { id: 6, value: !this.roleSelect && mark === 1 || !this.roleSelect && mark === 2 ? "\u6d3b\u8dc3\u6307\u6570" : null, key: !this.roleSelect && mark === 1 || !this.roleSelect && mark === 2 ? "activeIndex" : null, checked: true },\n    { id: 7, value: !this.roleSelect ? "\u9996\u65e5\u4ed8\u8d39\u4eba\u6570" : null, key: !this.roleSelect ? "firstDayPayUsers" : null, checked: true },\n    { id: 8, value: !this.roleSelect || !this.isShowtd ? "\u8001\u4ed8\u8d39\u4eba\u6570" : null, key: !this.roleSelect || !this.isShowtd ? "oldPayUsers" : null, checked: true },\n\n    { id: 9, value: this.roleSelect && this.mark !== 2 ? "\u6708\u6d3b\u8dc3" : null, key: this.roleSelect && this.mark !== 2 ? "avticeUsersOnMonth" : null, checked: true },\n    { id: 10, value: this.roleSelect && this.mark !== 2 ? "\u6708\u5e73\u5747\u6d3b\u8dc3\u5929\u6570" : null, key: this.roleSelect && this.mark !== 2 ? "viscosityIndex" : null, checked: true },\n    { id: 11, value: this.roleSelect && this.mark !== 2 ? "\u6708\u4ed8\u8d39\u4eba\u6570" : null, key: this.roleSelect && this.mark !== 2 ? "payUsersOnMonth" : null, checked: true },\n\n    { id: 12, value: "\u603b\u4ed8\u8d39\u4eba\u6570", key: "payUsers", checked: true },\n    { id: 13, value: "\u603b\u4ed8\u8d39\u91d1\u989d", key: "totalFeeCny", checked: true },\n    { id: 14, value: "\u6d3b\u8dc3\u4ed8\u8d39\u7387", key: "activeFeeRate", checked: true },\n    { id: 15, value: this.DayTabsIndex !== 1 ? "\u603b\u7528\u6237\u4ed8\u8d39\u7387" : null, key: this.DayTabsIndex !== 1 ? "totalPayRate" : null, checked: true },\n    { id: 16, value: !this.roleSelect && mark === 1 || !this.roleSelect && mark === 2 ? "\u9996\u65e5\u4ed8\u8d39\u7387" : null, key: !this.roleSelect && mark === 1 || !this.roleSelect && mark === 2 ? "firstPayRate" : null, checked: true },\n    { id: 17, value: !this.isShowtd ? "\u9996\u6b21\u521b\u89d2\u7387" : null, key: !this.isShowtd ? "firstRoleRate" : null, checked: true },\n    { id: 18, value: !this.roleSelect ? "\u9996\u65e5\u4ed8\u8d39\u91d1\u989d" : null, key: !this.roleSelect ? "firstDayPayFeeCny" : null, checked: true },\n    { id: 19, value: !this.roleSelect ? "\u8001\u4ed8\u8d39\u91d1\u989d" : null, key: !this.roleSelect ? "oldPayFee" : null, checked: true },\n    { id: 20, value: "ARPU", key: "arpu", checked: true },\n    { id: 21, value: "ARPPU", key: "arppu", checked: true },\n]\n\nthis.globalCommon.thOfData = thOfData;\nthis.globalCommon.initSetTHcheckedFun(this.globalCommon.thOfData);\n')),(0,a.kt)("h2",{id:"html-\u4ee3\u7801"},"html \u4ee3\u7801"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<a nz-tooltip nzTitle="\u5217\u8bbe\u7f6e" *ngIf="!loading && dataSet.length > 0">\n    <a nz-button nzType="link" nz-popover nzTrigger="click" [nzTitle]="thTitle" [nzContent]="thContent" nzPlacement="right"><i nz-icon nzType="setting" style="font-size: 16px;"></i></a>\n    <ng-template #thTitle>\n        <div>\n            <label nz-checkbox [nzChecked]="this.globalCommon.checkedTh" [nzIndeterminate]="this.globalCommon.indeterminateTh" (nzCheckedChange)="this.globalCommon.onAllThChecked($event)">\u5217\u5c55\u793a</label>\n            <a (click)="this.globalCommon.resetTh()" style="float: right;">\u91cd\u7f6e</a>\n        </div>\n    </ng-template>\n    <ng-template #thContent>\n        <div style="width: 500px;">\n            <span style="display: inline-block;" [ngStyle]="{width: item.value ? \'32%\':\'0\'}" *ngFor="let item of this.globalCommon.thOfData">\n                <label *ngIf="item.value" nz-checkbox [nzDisabled]="item.disabled" [nzChecked]="this.globalCommon.setOfThCheckedId.has(item.id)" (nzCheckedChange)="this.globalCommon.onItemThChecked(item.id, $event)"> {{item.value}} </label>\n            </span>\n        </div>\n    </ng-template>\n</a>\n')),(0,a.kt)("p",null,"isShowTable \u7528\u6765\u5224\u65ad\u662f\u5426\u663e\u793a\u9690\u85cf\u8868\u683c \u6570\u636e\u4e3a\u7a7a\u7684\u65f6\u5019\uff0c\u663e\u793a\u51fa\u7a7a\u6570\u636e"))}u.isMDXComponent=!0}}]);