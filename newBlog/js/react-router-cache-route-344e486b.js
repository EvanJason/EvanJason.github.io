import{n as S,s as Ge}from"./@babel-f2e68048.js";import{r as Xe}from"./react-58c93dee.js";import{r as Je}from"./mini-create-react-context-15ed7c15.js";import{p as Qe}from"./prop-types-faa0348d.js";import{r as Ye}from"./react-router-dom-d4265f33.js";var ke={exports:{}},ce={exports:{}};(function(ae,Ae){(function(y,l){l(Ae,Xe.exports,Je,Qe.exports,Ye)})(S,function(y,l,f,u,x){function W(e){return e===void 0}function ie(e){return e===null}function Y(e){return typeof e=="number"&&!Me(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h="default"in l?l.default:l,q=(f=f&&f.hasOwnProperty("default")?f.default:f,u=u&&u.hasOwnProperty("default")?u.default:u,function(e){return typeof e=="function"}),ue=function(e){return typeof e=="string"},T=function(e){return!(W(e)||ie(e))},se=function(e){return e instanceof Array},Me=function(e){return e!=e},v=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],n=arguments[2];try{Y(t)&&(t=String(t));var r=(ue(t)?t.split("."):t).reduce(function(c,a){return c[a]},e);return W(r)?n:r}catch{return n}},s=function(o){for(var t=arguments.length,n=Array(2<t?t-2:0),r=2;r<t;r++)n[r-2]=arguments[r];var c=ue(c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[])?c.split("."):c,a=v(o,c),o=v(o,c.slice(0,-1));return q(a)?a.call.apply(a,[o].concat(n)):a},le=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(r,c){return W(r)?s(c):s(r)},void 0)},re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e};function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function fe(e,t){var n,r={};for(n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function _(e,t){if(e)return!t||typeof t!="object"&&typeof t!="function"?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function pe(e){return e.reduce(function(t,n){return[].concat(M(t),M(se(n)?pe(n):[n]))},[])}function de(e){var t,n=[];for(t in e)n.push(e[t]);return n}var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,r=[],c=!0,t=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(c=(o=i.next()).done)&&(r.push(o.value),!n||r.length!==n);c=!0);}catch(p){t=!0,a=p}finally{try{!c&&i.return&&i.return()}finally{if(t)throw a}}return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},M=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},oe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof S<"u")return S;throw new Error("unable to locate global object")}(),I=(typeof S>"u"?"undefined":re(S))==="object"&&S&&S.Math===Math&&S.Array===Array?S:oe,Ne=v(I,"document.body"),ze=v(I,"document.scrollingElement",v(I,"document.documentElement",{}));function me(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return!!T(e)&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)}function De(e){return q(v(I,"document.getElementById"))?[].concat(M(le(s(e,"querySelectorAll","*"),[])),[e]).filter(me):[]}function Z(){return Object.entries(N).filter(function(e){return e=w(e,2)[1],e instanceof j?e.state.cached:Object.values(e).some(function(t){return t.state.cached})})}function ye(){return b({},N)}function ee(e,t){N[e]=t}function ve(e){delete N[e]}function _e(e){return s(e,"reset")}function be(e){(e=v(N,[e]))&&(e instanceof j?_e(e):Object.values(e).forEach(_e))}function we(e){return s(e,"refresh")}var N={},te=f(),Fe=te.Provider;te.Consumer;function ge(e,t){var n,r;q(l.useContext)&&((n=l.useRef(function(){return null})).current=t,r=l.useContext(te),l.useEffect(function(){var c=s(r,"on",e,function(){s(n.current)});return function(){return s(c)}},[]))}function ne(e,t){var n=e.match,r=(r=e.when)===void 0?"forward":r;if(G(n)||(n=null),!t.cached&&n)return{cached:!0,matched:!0};if(t.matched&&!n){var c=v(e,"history.action"),a=!1;if(q(r))a=!r(e);else switch(r){case"always":break;case"back":["PUSH","REPLACE"].includes(c)&&(a=!0);break;default:c==="POP"&&(a=!0)}if(a)return{cached:!1,matched:!1}}return{matched:!!n}}var re=ge.bind(null,"didCache"),oe=ge.bind(null,"didRecover"),Ce=T(h.forwardRef),Oe="__isComputedUnmatch",G=function(e){return T(e)&&v(e,Oe)!==!0},j=(f=l.Component,A(z,f),k(z,[{key:"componentDidUpdate",value:function(e,t){if(t.cached&&this.state.cached)return t.matched===!0&&this.state.matched===!1?(this.props.unmount&&this.ejectDOM(),this.__cacheUpdateTime=Date.now(),de(this.cacheLifecycles.__didCacheListener).forEach(function(n){s(n)}),s(this,"cacheLifecycles.__listener.didCache")):t.matched===!1&&this.state.matched===!0?(this.props.saveScrollPosition&&s(this.__revertScrollPos),this.__cacheUpdateTime=Date.now(),de(this.cacheLifecycles.__didRecoverListener).forEach(function(n){s(n)}),s(this,"cacheLifecycles.__listener.didRecover")):void 0}},{key:"shouldComponentUpdate",value:function(e,a){var n,r=this.state.matched===!1&&a.matched===!0,c=this.state.cached===!0&&a.cached===!1,a=this.state.matched||a.matched||this.state.cached!==a.cached;return a&&((this.props.unmount&&c||r)&&this.injectDOM(),c||r||!this.props.saveScrollPosition||(this.__revertScrollPos=(c=this.props.unmount?this.wrapper:void 0,n=[].concat(M(new Set([].concat(M(pe((se(c)?c:[c]).map(De))),M([ze,Ne].filter(me)))))).map(function(o){return[o,{x:o.scrollLeft,y:o.scrollTop}]}),function(){n.forEach(function(p){var p=w(p,2),i=p[0],p=p[1],g=p.x,p=p.y;i.scrollLeft=g,i.scrollTop=p})}))),a}},{key:"componentWillUnmount",value:function(){var n=this.props,e=n.unmount,t=n.href,n=n.multiple,r=s(this.props,"cacheKey",this.props);n?(delete(n=b({},ye()[r]))[t],Object.keys(n).length===0?ve(r):ee(r,n)):ve(r),e&&this.injectDOM()}},{key:"render",value:function(){var e=this,n=this.state,c=n.matched,t=n.cached,n=n.key,r=this.props,o=r.className,o=o===void 0?"":o,a=r.behavior,r=r.children,a=le(s(a,void 0,!c),{}),c=a.className,c=c===void 0?"":c,a=fe(a,["className"]),o=s(o+" "+c,"trim");return t?h.createElement("div",b({key:n,className:o!==""?o:void 0},a,{ref:function(i){e.wrapper=i}}),h.createElement(Fe,{value:this.cacheLifecycles},s(r,void 0,this.cacheLifecycles))):null}}]),z);function z(e){L(this,z);for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var c,a,o=_(this,(c=z.__proto__||Object.getPrototypeOf(z)).call.apply(c,[this,e].concat(n)));return o.cacheLifecycles={__listener:{},__didCacheListener:{},__didRecoverListener:{},on:function(i,g){var p=Math.random(),X="__"+i+"Listener";return o.cacheLifecycles[X][p]=g,function(){delete o.cacheLifecycles[X][p]}},didCache:function(i){o.cacheLifecycles.__listener.didCache=i},didRecover:function(i){o.cacheLifecycles.__listener.didRecover=i}},o.componentWillReceiveProps=Ce?void 0:function(i){i=ne(i,o.state),o.setState(i)},o.injectDOM=function(){try{s(o.__parentNode,"insertBefore",o.wrapper,o.__placeholderNode),s(o.__parentNode,"removeChild",o.__placeholderNode)}catch{}},o.ejectDOM=function(){try{var i=v(o.wrapper,"parentNode");o.__parentNode=i,s(o.__parentNode,"insertBefore",o.__placeholderNode,o.wrapper),s(o.__parentNode,"removeChild",o.wrapper)}catch{}},o.reset=function(){delete o.__revertScrollPos,o.setState({cached:!1})},o.refresh=function(){delete o.__revertScrollPos,o.setState({key:Math.random()})},o.__cacheCreateTime=Date.now(),o.__cacheUpdateTime=o.__cacheCreateTime,e.cacheKey&&(c=s(e.cacheKey,void 0,e),e.multiple?(a=e.href,ee(c,b({},ye()[c],$({},a,o)))):ee(c,o)),typeof document<"u"&&(a=s(e.cacheKey,void 0,e),o.__placeholderNode=document.createComment(" Route cached "+(a?'with cacheKey: "'+a+'" ':""))),o.state=ne(e,{cached:!1,matched:!1,key:Math.random()}),o}j.__name="CacheComponent",j.propsTypes={history:u.object.isRequired,match:u.object.isRequired,children:u.func.isRequired,className:u.string,when:u.oneOfType([u.func,u.oneOf(["forward","back","always"])]),behavior:u.func,unmount:u.bool,saveScrollPosition:u.bool},j.defaultProps={when:"forward",unmount:!1,saveScrollPosition:!1,behavior:function(e){return e?{style:{display:"none"}}:void 0}},j.getDerivedStateFromProps=Ce?ne:void 0;var Ke=!(q(l.lazy)&&!W(l.Suspense)),qe=(f=l.Component,A(D,f),k(D,[{key:"render",value:function(){var t=this.props,e=t.freeze,t=t.children,n=this.promiseCache;if(e&&!n.promise)throw n.promise=new Promise(function(r){n.resolve=r}),n.promise;if(e)throw n.promise;return n.promise&&(n.resolve(),n.promise=void 0),h.createElement(l.Fragment,null,t)}}]),D);function D(){var e;L(this,D);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=_(this,(e=D.__proto__||Object.getPrototypeOf(D)).call.apply(e,[this].concat(n)))).promiseCache={},_(e,e)}var Ue=l.Suspense?function(r){var t=r.freeze,n=r.children,r=r.placeholder;return Ke?n:h.createElement(l.Suspense,{fallback:r===void 0?null:r},h.createElement(qe,{freeze:t},n))}:function(e){return e.children},je=(f=l.Component,A(U,f),U);function U(e){L(this,U);var t=_(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,e));return t.state={freeze:!1},t.freezeTimeout=null,t.shouldComponentUpdate=function(c){var r=c.freeze,c=t.props.freeze;return r!==c&&(clearTimeout(t.freezeTimeout),t.freezeTimeout=setTimeout(function(){t.setState({freeze:r})},1e3)),!0},t.render=function(){return h.createElement(Ue,{freeze:!!t.props.freeze&&t.state.freeze},s(t.props,"children"))},t.state={freeze:e.freeze},t}je.propsTypes={freeze:u.bool.isRequired},f=l.Component,A(B,f);var Ee=B;function B(){var e,t;L(this,B);for(var n=arguments.length,r=Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t=_(this,(e=B.__proto__||Object.getPrototypeOf(B)).call.apply(e,[this].concat(r)))).render=function(){return s(t.props,"children")},t.shouldComponentUpdate=function(a){return a.when},_(t,e)}Ee.propsTypes={when:u.bool.isRequired};function Pe(e){return h.createElement(je,{freeze:!e.when},h.createElement(Ee,e))}var Be=T(l.Fragment),f=(f=l.Component,A(F,f),k(F,[{key:"render",value:function(){var e,t=this,d=this.props,n=d.children,r=d.render,c=d.component,a=d.className,o=d.when,i=d.behavior,g=d.cacheKey,p=d.unmount,X=d.saveScrollPosition,Te=d.computedMatchForCacheRoute,P=d.multiple,d=fe(d,["children","render","component","className","when","behavior","cacheKey","unmount","saveScrollPosition","computedMatchForCacheRoute","multiple"]);return!h.isValidElement(n)&&(e=n,h.Children.count(e)===0)||(r=function(){return n}),Te&&(d.computedMatch=Te),Y(P=P&&!Be?!1:P)&&(P=function(C,H){var J=2<arguments.length&&arguments[2]!==void 0?arguments[2]:Number.MAX_VALUE;return C<H?H:J<C?J:C}(P,1)),h.createElement(x.Route,d,function(C){function H(m){return h.createElement(j,m,function(R){return h.createElement(Pe,{when:G(m.match)},function(){return Object.assign(m,{cacheLifecycles:R}),c?h.createElement(c,m):s(r||n,void 0,m)})})}var J=C.match,He=C.computedMatch,Q=C.location,Ve=G(C.match),V=Q.pathname,xe=Q.search,We=Y(P)?P:1/0,Le={when:o,className:a,behavior:i,cacheKey:g,unmount:p,saveScrollPosition:X};return P&&Ve&&(t.cache[Q=V+xe]={updateTime:Date.now(),href:Q,pathname:V,render:H},Object.entries(t.cache).sort(function(m,R){return m=w(m,2)[1],w(R,2)[1].updateTime-m.updateTime}).forEach(function(m,R){m=w(m,1)[0],We<=R&&delete t.cache[m]})),P?h.createElement(l.Fragment,null,Object.entries(t.cache).map(function(O){var O=w(O,2),R=O[0],O=O[1],$e=O.render,Ie=O.href,O=O.pathname;return h.createElement(l.Fragment,{key:R},$e(b({},C,Le,{cacheKey:g,pathname:O,href:Ie,multiple:!0,key:R,match:R===V+xe?J||He:null})))})):H(b({},C,Le,{pathname:V,href:V,multiple:!1}))})}}]),F);function F(){var e;L(this,F);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=_(this,(e=F.__proto__||Object.getPrototypeOf(F)).call.apply(e,[this].concat(n)))).cache={},_(e,e)}f.__name="CacheRoute",f.propTypes={component:u.elementType||u.any,render:u.func,children:u.oneOfType([u.func,u.node]),computedMatchForCacheRoute:u.object,multiple:u.oneOfType([u.bool,u.number])},f.defaultProps={multiple:!1};var Re=T(l.Fragment)?function(e){return e=e.children,h.createElement(l.Fragment,null,e)}:T(l.PropTypes)?function(e){return e=e.children,h.createElement("div",null,e)}:function(e){return e.children},Se=(Re.displayName="SwitchFragment",T(x.__RouterContext)||T(x.useHistory)),E=(E=x.Switch,A(K,E),k(K,[{key:"render",value:function(){var n=this.props,e=n.children,t=n.which,n=this.getContext(),r=n.location,c=n.match,a=!1;return h.createElement(Pe,{when:G(c)},function(){return h.createElement(Re,null,h.Children.map(e,function(o){if(!h.isValidElement(o))return null;var i=o.props.path||o.props.from,i=a?null:i?x.matchPath(r.pathname,b({},o.props,{path:i}),c):c,g=void 0,g=t(o)?h.cloneElement(o,b({location:r,computedMatch:i},ie(i)?{computedMatchForCacheRoute:$({},Oe,!0)}:null)):i&&!a?h.cloneElement(o,{location:r,computedMatch:i}):null;return a=a||!!i,g}))})}}]),K);function K(){var e,t;L(this,K);for(var n=arguments.length,r=Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=_(this,(e=K.__proto__||Object.getPrototypeOf(K)).call.apply(e,[this].concat(r)))).getContext=function(){var a;return Se?{location:(a=t.props).location,match:a.match}:(a=t.context.router.route,{location:t.props.location||a.location,match:a.match})},_(t,t)}Se?(E.propTypes={children:u.node,location:u.object.isRequired,match:u.object.isRequired,which:u.func},E=x.withRouter(E)):(E.contextTypes={router:u.shape({route:u.object.isRequired}).isRequired},E.propTypes={children:u.node,location:u.object,which:u.func}),E.defaultProps={which:function(e){return v(e,"type.__name")==="CacheRoute"}},k=E,y.default=f,y.CacheRoute=f,y.CacheSwitch=k,y.dropByCacheKey=be,y.refreshByCacheKey=function(e){e=v(N,[e]),e&&(e instanceof j?we(e):Object.values(e).forEach(we))},y.getCachingKeys=function(){return Z().map(function(e){return w(e,1)[0]})},y.clearCache=function(){Z().forEach(function(e){return e=w(e,1)[0],be(e)})},y.getCachingComponents=function(){return Z().reduce(function(e,r){var r=w(r,2),n=r[0],r=r[1];return b({},e,r instanceof j?$({},n,r):Object.entries(r).reduce(function(c,i){var i=w(i,2),o=i[0],i=i[1];return b({},c,$({},n+"."+o,i))},{}))},{})},y.useDidCache=re,y.useDidRecover=oe,Object.defineProperty(y,"__esModule",{value:!0})})})(ce,ce.exports);(function(ae){ae.exports=ce.exports})(ke);const ot=Ge(ke.exports);export{ot as C,ke as r};
