import{l as y,h as g,t as q}from"./@babel-f2e68048.js";import{R as f}from"./react-58c93dee.js";import{p as W}from"./prop-types-faa0348d.js";import{c as J,a as M,l as Q,b as Y}from"./history-780127be.js";import{i as x}from"./tiny-invariant-57478369.js";import{p as V}from"./path-to-regexp-89445278.js";import"./react-is-10cd0232.js";import{h as Z}from"./hoist-non-react-statics-156e9b51.js";import{j as b}from"./@ant-design-3072d4b7.js";var E=1073741823,B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function tt(){var t="__global_unique_id__";return B[t]=(B[t]||0)+1}function et(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function nt(t){var e=[];return{on:function(o){e.push(o)},off:function(o){e=e.filter(function(n){return n!==o})},get:function(){return t},set:function(o,n){t=o,e.forEach(function(a){return a(t,n)})}}}function rt(t){return Array.isArray(t)?t[0]:t}function ot(t,e){var r,o,n="__create-react-context-"+tt()+"__",a=function(u){y(c,u);function c(){for(var i,l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return i=u.call.apply(u,[this].concat(h))||this,i.emitter=nt(i.props.value),i}var p=c.prototype;return p.getChildContext=function(){var l;return l={},l[n]=this.emitter,l},p.componentWillReceiveProps=function(l){if(this.props.value!==l.value){var h=this.props.value,v=l.value,m;et(h,v)?m=0:(m=typeof e=="function"?e(h,v):E,m|=0,m!==0&&this.emitter.set(l.value,m))}},p.render=function(){return this.props.children},c}(f.Component);a.childContextTypes=(r={},r[n]=W.exports.object.isRequired,r);var s=function(u){y(c,u);function c(){for(var i,l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return i=u.call.apply(u,[this].concat(h))||this,i.observedBits=void 0,i.state={value:i.getValue()},i.onUpdate=function(m,P){var C=i.observedBits|0;(C&P)!==0&&i.setState({value:i.getValue()})},i}var p=c.prototype;return p.componentWillReceiveProps=function(l){var h=l.observedBits;this.observedBits=h==null?E:h},p.componentDidMount=function(){this.context[n]&&this.context[n].on(this.onUpdate);var l=this.props.observedBits;this.observedBits=l==null?E:l},p.componentWillUnmount=function(){this.context[n]&&this.context[n].off(this.onUpdate)},p.getValue=function(){return this.context[n]?this.context[n].get():t},p.render=function(){return rt(this.props.children)(this.state.value)},c}(f.Component);return s.contextTypes=(o={},o[n]=W.exports.object,o),{Provider:a,Consumer:s}}var it=f.createContext||ot,G=function(e){var r=it();return r.displayName=e,r},O=G("Router-History"),d=G("Router"),F=function(t){y(e,t),e.computeRootMatch=function(n){return{path:"/",url:"/",params:{},isExact:n==="/"}};function e(o){var n;return n=t.call(this,o)||this,n.state={location:o.history.location},n._isMounted=!1,n._pendingLocation=null,o.staticContext||(n.unlisten=o.history.listen(function(a){n._pendingLocation=a})),n}var r=e.prototype;return r.componentDidMount=function(){var n=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(a){n._isMounted&&n.setState({location:a})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return f.createElement(d.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},f.createElement(O.Provider,{children:this.props.children||null,value:this.props.history}))},e}(f.Component),_t=function(t){y(e,t);function e(){for(var o,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return o=t.call.apply(t,[this].concat(a))||this,o.history=J(o.props),o}var r=e.prototype;return r.render=function(){return b(F,{history:this.history,children:this.props.children})},e}(f.Component),K=function(t){y(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},r.componentDidUpdate=function(n){this.props.onUpdate&&this.props.onUpdate.call(this,this,n)},r.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},r.render=function(){return null},e}(f.Component);function Pt(t){var e=t.message,r=t.when,o=r===void 0?!0:r;return f.createElement(d.Consumer,null,function(n){if(n||x(!1),!o||n.staticContext)return null;var a=n.history.block;return b(K,{onMount:function(u){u.release=a(e)},onUpdate:function(u,c){c.message!==e&&(u.release(),u.release=a(e))},onUnmount:function(u){u.release()},message:e})})}var R={},at=1e4,N=0;function st(t){if(R[t])return R[t];var e=V.exports.compile(t);return N<at&&(R[t]=e,N++),e}function D(t,e){return t===void 0&&(t="/"),e===void 0&&(e={}),t==="/"?t:st(t)(e,{pretty:!0})}function Ut(t){var e=t.computedMatch,r=t.to,o=t.push,n=o===void 0?!1:o;return f.createElement(d.Consumer,null,function(a){a||x(!1);var s=a.history,u=a.staticContext,c=n?s.push:s.replace,p=M(e?typeof r=="string"?D(r,e.params):g({},r,{pathname:D(r.pathname,e.params)}):r);return u?(c(p),null):b(K,{onMount:function(){c(p)},onUpdate:function(l,h){var v=M(h.to);Q(v,g({},p,{key:v.key}))||c(p)},to:r})})}var $={},ut=1e4,j=0;function ct(t,e){var r=""+e.end+e.strict+e.sensitive,o=$[r]||($[r]={});if(o[t])return o[t];var n=[],a=V.exports(t,n,e),s={regexp:a,keys:n};return j<ut&&(o[t]=s,j++),s}function L(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var r=e,o=r.path,n=r.exact,a=n===void 0?!1:n,s=r.strict,u=s===void 0?!1:s,c=r.sensitive,p=c===void 0?!1:c,i=[].concat(o);return i.reduce(function(l,h){if(!h&&h!=="")return null;if(l)return l;var v=ct(h,{end:a,strict:u,sensitive:p}),m=v.regexp,P=v.keys,C=m.exec(t);if(!C)return null;var U=C[0],X=C.slice(1),T=t===U;return a&&!T?null:{path:h,url:h==="/"&&U===""?"/":U,isExact:T,params:P.reduce(function(S,k,z){return S[k.name]=X[z],S},{})}},null)}function pt(t){return f.Children.count(t)===0}var Et=function(t){y(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var n=this;return f.createElement(d.Consumer,null,function(a){a||x(!1);var s=n.props.location||a.location,u=n.props.computedMatch?n.props.computedMatch:n.props.path?L(s.pathname,n.props):a.match,c=g({},a,{location:s,match:u}),p=n.props,i=p.children,l=p.component,h=p.render;return Array.isArray(i)&&pt(i)&&(i=null),f.createElement(d.Provider,{value:c},c.match?i?typeof i=="function"?i(c):i:l?f.createElement(l,c):h?h(c):null:typeof i=="function"?i(c):null)})},e}(f.Component);function A(t){return t.charAt(0)==="/"?t:"/"+t}function lt(t,e){return t?g({},e,{pathname:A(t)+e.pathname}):e}function ht(t,e){if(!t)return e;var r=A(t);return e.pathname.indexOf(r)!==0?e:g({},e,{pathname:e.pathname.substr(r.length)})}function H(t){return typeof t=="string"?t:Y(t)}function w(t){return function(){x(!1)}}function I(){}var Rt=function(t){y(e,t);function e(){for(var o,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return o=t.call.apply(t,[this].concat(a))||this,o.handlePush=function(u){return o.navigateTo(u,"PUSH")},o.handleReplace=function(u){return o.navigateTo(u,"REPLACE")},o.handleListen=function(){return I},o.handleBlock=function(){return I},o}var r=e.prototype;return r.navigateTo=function(n,a){var s=this.props,u=s.basename,c=u===void 0?"":u,p=s.context,i=p===void 0?{}:p;i.action=a,i.location=lt(c,M(n)),i.url=H(i.location)},r.render=function(){var n=this.props,a=n.basename,s=a===void 0?"":a,u=n.context,c=u===void 0?{}:u,p=n.location,i=p===void 0?"/":p,l=q(n,["basename","context","location"]),h={createHref:function(m){return A(s+H(m))},action:"POP",location:ht(s,M(i)),push:this.handlePush,replace:this.handleReplace,go:w(),goBack:w(),goForward:w(),listen:this.handleListen,block:this.handleBlock};return b(F,{...l,history:h,staticContext:c})},e}(f.Component),wt=function(t){y(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var n=this;return f.createElement(d.Consumer,null,function(a){a||x(!1);var s=n.props.location||a.location,u,c;return f.Children.forEach(n.props.children,function(p){if(c==null&&f.isValidElement(p)){u=p;var i=p.props.path||p.props.from;c=i?L(s.pathname,g({},p.props,{path:i})):a.match}}),c?f.cloneElement(u,{location:s,computedMatch:c}):null})},e}(f.Component);function Lt(t){var e="withRouter("+(t.displayName||t.name)+")",r=function(n){var a=n.wrappedComponentRef,s=q(n,["wrappedComponentRef"]);return f.createElement(d.Consumer,null,function(u){return u||x(!1),b(t,{...s,...u,ref:a})})};return r.displayName=e,r.WrappedComponent=t,Z(r,t)}var _=f.useContext;function At(){return _(O)}function ft(){return _(d).location}function Tt(){var t=_(d).match;return t?t.params:{}}function St(t){var e=ft(),r=_(d).match;return t?L(e.pathname,t):r}export{_t as M,Pt as P,F as R,Rt as S,Ut as a,Et as b,d as c,wt as d,ft as e,Tt as f,D as g,St as h,L as m,At as u,Lt as w};
