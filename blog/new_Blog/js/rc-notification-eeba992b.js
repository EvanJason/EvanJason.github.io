import{d as K,b as G,c as w,f as P,g as Q}from"./@babel-f2e68048.js";import{r as i}from"./react-58c93dee.js";import{r as q}from"./react-dom-8cc54753.js";import{a as W}from"./rc-motion-1f7e3db8.js";import{c as j}from"./classnames-4191e3dc.js";import{K as z}from"./rc-util-492f7971.js";import{a as B,j as I,F as J}from"./@ant-design-3072d4b7.js";var U=i.exports.forwardRef(function(e,d){var y=e.prefixCls,c=e.style,f=e.className,l=e.duration,s=l===void 0?4.5:l,k=e.eventKey,h=e.content,N=e.closable,_=e.closeIcon,S=_===void 0?"x":_,E=e.props,A=e.onClick,m=e.onNoticeClose,b=e.times,$=i.exports.useState(!1),u=K($,2),C=u[0],x=u[1],g=function(){m(k)},v=function(r){(r.key==="Enter"||r.code==="Enter"||r.keyCode===z.ENTER)&&g()};i.exports.useEffect(function(){if(!C&&s>0){var t=setTimeout(function(){g()},s*1e3);return function(){clearTimeout(t)}}},[s,C,b]);var n="".concat(y,"-notice");return B("div",{...E,ref:d,className:j(n,f,G({},"".concat(n,"-closable"),N)),style:c,onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)},onClick:A,children:[I("div",{className:"".concat(n,"-content"),children:h}),N&&I("a",{tabIndex:0,className:"".concat(n,"-close"),onKeyDown:v,onClick:function(r){r.preventDefault(),r.stopPropagation(),g()},children:S})]})});const V=U;var X=i.exports.forwardRef(function(e,d){var y=e.prefixCls,c=y===void 0?"rc-notification":y,f=e.container,l=e.motion,s=e.maxCount,k=e.className,h=e.style,N=e.onAllRemoved,_=i.exports.useState([]),S=K(_,2),E=S[0],A=S[1],m=function(t){var r,o=E.find(function(a){return a.key===t});o==null||(r=o.onClose)===null||r===void 0||r.call(o),A(function(a){return a.filter(function(R){return R.key!==t})})};i.exports.useImperativeHandle(d,function(){return{open:function(t){A(function(r){var o=w(r),a=o.findIndex(function(M){return M.key===t.key}),R=P({},t);if(a>=0){var p;R.times=(((p=r[a])===null||p===void 0?void 0:p.times)||0)+1,o[a]=R}else R.times=0,o.push(R);return s>0&&o.length>s&&(o=o.slice(-s)),o})},close:function(t){m(t)},destroy:function(){A([])}}});var b=i.exports.useState({}),$=K(b,2),u=$[0],C=$[1];i.exports.useEffect(function(){var n={};E.forEach(function(t){var r=t.placement,o=r===void 0?"topRight":r;o&&(n[o]=n[o]||[],n[o].push(t))}),Object.keys(u).forEach(function(t){n[t]=n[t]||[]}),C(n)},[E]);var x=function(t){C(function(r){var o=P({},r),a=o[t]||[];return a.length||delete o[t],o})},g=i.exports.useRef(!1);if(i.exports.useEffect(function(){Object.keys(u).length>0?g.current=!0:g.current&&(N==null||N(),g.current=!1)},[u]),!f)return null;var v=Object.keys(u);return q.exports.createPortal(I(J,{children:v.map(function(n){var t=u[n],r=t.map(function(a){return{config:a,key:a.key}}),o=typeof l=="function"?l(n):l;return I(W,{className:j(c,"".concat(c,"-").concat(n),k==null?void 0:k(n)),style:h==null?void 0:h(n),keys:r,motionAppear:!0,...o,onAllRemoved:function(){x(n)},children:function(a,R){var p=a.config,M=a.className,T=a.style,L=p.key,O=p.times,H=p.className,F=p.style;return i.exports.createElement(V,{...p,ref:R,prefixCls:c,className:j(M,H),style:P(P({},T),F),times:O,key:L,eventKey:L,onNoticeClose:m})}},n)})}),f)}),Y=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],Z=function(){return document.body},D=0;function ee(){for(var e={},d=arguments.length,y=new Array(d),c=0;c<d;c++)y[c]=arguments[c];return y.forEach(function(f){f&&Object.keys(f).forEach(function(l){var s=f[l];s!==void 0&&(e[l]=s)})}),e}function se(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=e.getContainer,y=d===void 0?Z:d,c=e.motion,f=e.prefixCls,l=e.maxCount,s=e.className,k=e.style,h=e.onAllRemoved,N=Q(e,Y),_=i.exports.useState(),S=K(_,2),E=S[0],A=S[1],m=i.exports.useRef(),b=I(X,{container:E,ref:m,prefixCls:f,motion:c,maxCount:l,className:s,style:k,onAllRemoved:h}),$=i.exports.useState([]),u=K($,2),C=u[0],x=u[1],g=i.exports.useMemo(function(){return{open:function(n){var t=ee(N,n);(t.key===null||t.key===void 0)&&(t.key="rc-notification-".concat(D),D+=1),x(function(r){return[].concat(w(r),[{type:"open",config:t}])})},close:function(n){x(function(t){return[].concat(w(t),[{type:"close",key:n}])})},destroy:function(){x(function(n){return[].concat(w(n),[{type:"destroy"}])})}}},[]);return i.exports.useEffect(function(){A(y())}),i.exports.useEffect(function(){m.current&&C.length&&(C.forEach(function(v){switch(v.type){case"open":m.current.open(v.config);break;case"close":m.current.close(v.key);break;case"destroy":m.current.destroy();break}}),x([]))},[C]),[g,b]}export{V as N,se as u};
