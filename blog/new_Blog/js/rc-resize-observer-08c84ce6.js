import{r as t}from"./react-58c93dee.js";import{s as N,h as L,D as M,t as $}from"./rc-util-492f7971.js";import{i as A,j as F,a as K,_ as T,f as D}from"./@babel-f2e68048.js";import{i as V}from"./resize-observer-polyfill-3e8f9c46.js";import{j as I}from"./@ant-design-3072d4b7.js";var c=new Map;function X(e){e.forEach(function(o){var r,i=o.target;(r=c.get(i))===null||r===void 0||r.forEach(function(n){return n(i)})})}var O=new V(X);function Y(e,o){c.has(e)||(c.set(e,new Set),O.observe(e)),c.get(e).add(o)}function q(e,o){c.has(e)&&(c.get(e).delete(o),c.get(e).size||(O.unobserve(e),c.delete(e)))}var G=function(e){A(r,e);var o=F(r);function r(){return K(this,r),o.apply(this,arguments)}return T(r,[{key:"render",value:function(){return this.props.children}}]),r}(t.exports.Component),x=t.exports.createContext(null);function J(e){var o=e.children,r=e.onBatchResize,i=t.exports.useRef(0),n=t.exports.useRef([]),s=t.exports.useContext(x),v=t.exports.useCallback(function(d,f,u){i.current+=1;var l=i.current;n.current.push({size:d,element:f,data:u}),Promise.resolve().then(function(){l===i.current&&(r==null||r(n.current),n.current=[])}),s==null||s(d,f,u)},[r,s]);return I(x.Provider,{value:v,children:o})}function Q(e,o){var r=e.children,i=e.disabled,n=t.exports.useRef(null),s=t.exports.useRef(null),v=t.exports.useContext(x),d=typeof r=="function",f=d?r(n):r,u=t.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),l=!d&&t.exports.isValidElement(f)&&N(f),m=l?f.ref:null,P=t.exports.useMemo(function(){return L(m,n)},[m,n]),C=function(){return M(n.current)||M(s.current)};t.exports.useImperativeHandle(o,function(){return C()});var b=t.exports.useRef(e);b.current=e;var z=t.exports.useCallback(function(a){var w=b.current,_=w.onResize,S=w.data,E=a.getBoundingClientRect(),R=E.width,g=E.height,h=a.offsetWidth,p=a.offsetHeight,y=Math.floor(R),W=Math.floor(g);if(u.current.width!==y||u.current.height!==W||u.current.offsetWidth!==h||u.current.offsetHeight!==p){var k={width:y,height:W,offsetWidth:h,offsetHeight:p};u.current=k;var j=h===Math.round(R)?R:h,B=p===Math.round(g)?g:p,H=D(D({},k),{},{offsetWidth:j,offsetHeight:B});v==null||v(H,a,S),_&&Promise.resolve().then(function(){_(H,a)})}},[]);return t.exports.useEffect(function(){var a=C();return a&&!i&&Y(a,z),function(){return q(a,z)}},[n.current,i]),I(G,{ref:s,children:l?t.exports.cloneElement(f,{ref:P}):f})}var U=t.exports.forwardRef(Q),Z="rc-observer-key";function ee(e,o){var r=e.children,i=typeof r=="function"?[r]:$(r);return i.map(function(n,s){var v=(n==null?void 0:n.key)||"".concat(Z,"-").concat(s);return t.exports.createElement(U,{...e,key:v,ref:s===0?o:void 0},n)})}var re=t.exports.forwardRef(ee);re.Collection=J;export{re as R};
