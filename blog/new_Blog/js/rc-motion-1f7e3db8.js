import{e as ce,d as D,b as g,f as d,i as Re,j as Le,a as Me,_ as _e,q as Se,g as ye}from"./@babel-f2e68048.js";import{r as s}from"./react-58c93dee.js";import{c as ve,o as he,C as Z,j as qe,s as Be,D as Ge}from"./rc-util-492f7971.js";import{c as He}from"./classnames-4191e3dc.js";import{j as Pe}from"./@ant-design-3072d4b7.js";function Ae(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function Je(t,e){var n={animationend:Ae("Animation","AnimationEnd"),transitionend:Ae("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var Xe=Je(ve(),typeof window<"u"?window:{}),be={};if(ve()){var Ye=document.createElement("div");be=Ye.style}var H={};function Oe(t){if(H[t])return H[t];var e=Xe[t];if(e)for(var n=Object.keys(e),r=n.length,a=0;a<r;a+=1){var u=n[a];if(Object.prototype.hasOwnProperty.call(e,u)&&u in be)return H[t]=e[u],H[t]}return""}var De=Oe("animationend"),Ne=Oe("transitionend"),Ve=!!(De&&Ne),xe=De||"animationend",ge=Ne||"transitionend";function Te(t,e){if(!t)return null;if(ce(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}var K="none",J="appear",X="enter",Y="leave",ke="none",L="prepare",U="start",Q="active",fe="end";const Ze=function(){var t=s.exports.useRef(null);function e(){he.cancel(t.current)}function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var u=he(function(){a<=1?r({isCanceled:function(){return u!==t.current}}):n(r,a-1)});t.current=u}return s.exports.useEffect(function(){return function(){e()}},[]),[n,e]};var je=ve()?s.exports.useLayoutEffect:s.exports.useEffect,Ce=[L,U,Q,fe],we=!1,et=!0;function Fe(t){return t===Q||t===fe}const tt=function(t,e){var n=Z(ke),r=D(n,2),a=r[0],u=r[1],o=Ze(),p=D(o,2),y=p[0],i=p[1];function c(){u(L,!0)}return je(function(){if(a!==ke&&a!==fe){var v=Ce.indexOf(a),f=Ce[v+1],l=e(a);l===we?u(f,!0):y(function(h){function k(){h.isCanceled()||u(f,!0)}l===!0?k():Promise.resolve(l).then(k)})}},[t,a]),s.exports.useEffect(function(){return function(){i()}},[]),[c,a]},nt=function(t){var e=s.exports.useRef(),n=s.exports.useRef(t);n.current=t;var r=s.exports.useCallback(function(o){n.current(o)},[]);function a(o){o&&(o.removeEventListener(ge,r),o.removeEventListener(xe,r))}function u(o){e.current&&e.current!==o&&a(e.current),o&&o!==e.current&&(o.addEventListener(ge,r),o.addEventListener(xe,r),e.current=o)}return s.exports.useEffect(function(){return function(){a(e.current)}},[]),[u,a]};function rt(t,e,n,r){var a=r.motionEnter,u=a===void 0?!0:a,o=r.motionAppear,p=o===void 0?!0:o,y=r.motionLeave,i=y===void 0?!0:y,c=r.motionDeadline,v=r.motionLeaveImmediately,f=r.onAppearPrepare,l=r.onEnterPrepare,h=r.onLeavePrepare,k=r.onAppearStart,C=r.onEnterStart,T=r.onLeaveStart,j=r.onAppearActive,M=r.onEnterActive,_=r.onLeaveActive,P=r.onAppearEnd,R=r.onEnterEnd,N=r.onLeaveEnd,V=r.onVisibleChanged,q=Z(),b=D(q,2),m=b[0],w=b[1],F=Z(K),O=D(F,2),A=O[0],$=O[1],W=Z(null),le=D(W,2),Ie=le[0],de=le[1],ee=s.exports.useRef(!1),te=s.exports.useRef(null);function B(){return n()}var pe=s.exports.useRef(!1);function me(E){var S=B();if(!(E&&!E.deadline&&E.target!==S)){var x=pe.current,G;A===J&&x?G=P==null?void 0:P(S,E):A===X&&x?G=R==null?void 0:R(S,E):A===Y&&x&&(G=N==null?void 0:N(S,E)),A!==K&&x&&G!==!1&&($(K,!0),de(null,!0))}}var Ke=nt(me),Ue=D(Ke,1),Qe=Ue[0],z=s.exports.useMemo(function(){var E,S,x;switch(A){case J:return E={},g(E,L,f),g(E,U,k),g(E,Q,j),E;case X:return S={},g(S,L,l),g(S,U,C),g(S,Q,M),S;case Y:return x={},g(x,L,h),g(x,U,T),g(x,Q,_),x;default:return{}}},[A]),$e=tt(A,function(E){if(E===L){var S=z[L];return S?S(B()):we}if(I in z){var x;de(((x=z[I])===null||x===void 0?void 0:x.call(z,B(),null))||null)}return I===Q&&(Qe(B()),c>0&&(clearTimeout(te.current),te.current=setTimeout(function(){me({deadline:!0})},c))),et}),Ee=D($e,2),We=Ee[0],I=Ee[1],ze=Fe(I);pe.current=ze,je(function(){w(e);var E=ee.current;if(ee.current=!0,!!t){var S;!E&&e&&p&&(S=J),E&&e&&u&&(S=X),(E&&!e&&i||!E&&v&&!e&&i)&&(S=Y),S&&($(S),We())}},[e]),s.exports.useEffect(function(){(A===J&&!p||A===X&&!u||A===Y&&!i)&&$(K)},[p,u,i]),s.exports.useEffect(function(){return function(){ee.current=!1,clearTimeout(te.current)}},[]);var ne=s.exports.useRef(!1);s.exports.useEffect(function(){m&&(ne.current=!0),m!==void 0&&A===K&&((ne.current||m)&&(V==null||V(m)),ne.current=!0)},[m,A]);var re=Ie;return z[L]&&I===U&&(re=d({transition:"none"},re)),[A,I,re,m!=null?m:e]}var at=function(t){Re(n,t);var e=Le(n);function n(){return Me(this,n),e.apply(this,arguments)}return _e(n,[{key:"render",value:function(){return this.props.children}}]),n}(s.exports.Component);function ot(t){var e=t;ce(t)==="object"&&(e=t.transitionSupport);function n(a){return!!(a.motionName&&e)}var r=s.exports.forwardRef(function(a,u){var o=a.visible,p=o===void 0?!0:o,y=a.removeOnLeave,i=y===void 0?!0:y,c=a.forceRender,v=a.children,f=a.motionName,l=a.leavedClassName,h=a.eventProps,k=n(a),C=s.exports.useRef(),T=s.exports.useRef();function j(){try{return C.current instanceof HTMLElement?C.current:Ge(T.current)}catch{return null}}var M=rt(k,p,j,a),_=D(M,4),P=_[0],R=_[1],N=_[2],V=_[3],q=s.exports.useRef(V);V&&(q.current=!0);var b=s.exports.useCallback(function(W){C.current=W,qe(u,W)},[u]),m,w=d(d({},h),{},{visible:p});if(!v)m=null;else if(P===K||!n(a))V?m=v(d({},w),b):!i&&q.current&&l?m=v(d(d({},w),{},{className:l}),b):c||!i&&!l?m=v(d(d({},w),{},{style:{display:"none"}}),b):m=null;else{var F,O;R===L?O="prepare":Fe(R)?O="active":R===U&&(O="start"),m=v(d(d({},w),{},{className:He(Te(f,P),(F={},g(F,Te(f,"".concat(P,"-").concat(O)),O),g(F,f,typeof f=="string"),F)),style:N}),b)}if(s.exports.isValidElement(m)&&Be(m)){var A=m,$=A.ref;$||(m=s.exports.cloneElement(m,{ref:b}))}return Pe(at,{ref:T,children:m})});return r.displayName="CSSMotion",r}const it=ot(Ve);var oe="add",ie="keep",se="remove",ae="removed";function st(t){var e;return t&&ce(t)==="object"&&"key"in t?e=t:e={key:t},d(d({},e),{},{key:String(e.key)})}function ue(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(st)}function ut(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,a=e.length,u=ue(t),o=ue(e);u.forEach(function(i){for(var c=!1,v=r;v<a;v+=1){var f=o[v];if(f.key===i.key){r<v&&(n=n.concat(o.slice(r,v).map(function(l){return d(d({},l),{},{status:oe})})),r=v),n.push(d(d({},f),{},{status:ie})),r+=1,c=!0;break}}c||n.push(d(d({},i),{},{status:se}))}),r<a&&(n=n.concat(o.slice(r).map(function(i){return d(d({},i),{},{status:oe})})));var p={};n.forEach(function(i){var c=i.key;p[c]=(p[c]||0)+1});var y=Object.keys(p).filter(function(i){return p[i]>1});return y.forEach(function(i){n=n.filter(function(c){var v=c.key,f=c.status;return v!==i||f!==se}),n.forEach(function(c){c.key===i&&(c.status=ie)})}),n}var ct=["component","children","onVisibleChanged","onAllRemoved"],vt=["status"],ft=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function lt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it,n=function(r){Re(u,r);var a=Le(u);function u(){var o;Me(this,u);for(var p=arguments.length,y=new Array(p),i=0;i<p;i++)y[i]=arguments[i];return o=a.call.apply(a,[this].concat(y)),g(Se(o),"state",{keyEntities:[]}),g(Se(o),"removeKey",function(c){var v=o.state.keyEntities,f=v.map(function(l){return l.key!==c?l:d(d({},l),{},{status:ae})});return o.setState({keyEntities:f}),f.filter(function(l){var h=l.status;return h!==ae}).length}),o}return _e(u,[{key:"render",value:function(){var p=this,y=this.state.keyEntities,i=this.props,c=i.component,v=i.children,f=i.onVisibleChanged,l=i.onAllRemoved,h=ye(i,ct),k=c||s.exports.Fragment,C={};return ft.forEach(function(T){C[T]=h[T],delete h[T]}),delete h.keys,Pe(k,{...h,children:y.map(function(T){var j=T.status,M=ye(T,vt),_=j===oe||j===ie;return s.exports.createElement(e,{...C,key:M.key,visible:_,eventProps:M,onVisibleChanged:function(R){if(f==null||f(R,{key:M.key}),!R){var N=p.removeKey(M.key);N===0&&l&&l()}}},v)})})}}],[{key:"getDerivedStateFromProps",value:function(p,y){var i=p.keys,c=y.keyEntities,v=ue(i),f=ut(c,v);return{keyEntities:f.filter(function(l){var h=c.find(function(k){var C=k.key;return l.key===C});return!(h&&h.status===ae&&l.status===se)})}}}]),u}(s.exports.Component);return g(n,"defaultProps",{component:"div"}),n}const yt=lt(Ve);export{it as C,yt as a};
